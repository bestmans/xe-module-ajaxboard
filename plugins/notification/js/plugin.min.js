/*! Copyright (C) 2014 AJAXBOARD. All rights reserved. */!function(t,i){"use strict";function n(e,t){return t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(""),e.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(e,i){return t.indexOf("<"+i.toLowerCase()+">")>-1?e:""})}"undefined"!=typeof t.Notification&&(t.allowNotification=function(){Notification.requestPermission(function(){i("#permission-description").fadeOut()})},t.denyNotification=function(){var e=new Date;e.setTime(e.getTime()+2592e6),setCookie("notification_denied","Y",e),i("#permission-description").fadeOut()},i(function(){var o=t.ajaxboard;o.insertTrigger("events.broadcastMessage","before",function(e){var t={body:n(e.extra_vars.message),icon:NOTIFICATION_ICON,tag:NOTIFICATION_ID+":broadcastMessage:"+NOTIFICATION.length,onshow:function(e){setTimeout(function(){e.currentTarget.close()},NOTIFICATION_BRO_DURATION)}};NOTIFICATION.push(new Notification(NOTIFICATION_BRO_TITLE,t))}),NOTIFICATION_USER_INFO&&o.insertTrigger("events.insertDocument.detail","before",function(r,s){if(!(i.inArray(Number(r.module_srl),NOTIFICATION_USER_INFO)<0)){var I={body:n(s.title),icon:NOTIFICATION_ICON,tag:NOTIFICATION_ID+"insertDocument:"+r.target_srl,onclick:function(){t.focus(),location.href=o.request_uri.setQuery("document_srl",r.target_srl)},onshow:function(){setTimeout(function(){e.currentTarget.close()},NOTIFICATION_DOC_DURATION)}};NOTIFICATION.push(new Notification(NOTIFICATION_DOC_TITLE+" #"+s.browser_title,I))}}),o.member_srl&&o.insertTrigger("events.insertComment.detail","before",function(e,i){if(o.member_srl!=e.target_member_srl&&o.member_srl==e.parent_member_srl){var r={body:n(i.content),icon:NOTIFICATION_ICON,tag:NOTIFICATION_ID+":insertComment:"+e.target_srl,onclick:function(){t.focus(),location.href=o.request_uri.setQuery("act","procAjaxboardRedirect").setQuery("type","C").setQuery("target_srl",e.target_srl)},onshow:function(e){setTimeout(function(){e.currentTarget.close()},NOTIFICATION_COM_DURATION)}};NOTIFICATION.push(new Notification(NOTIFICATION_COM_TITLE+" #"+i.browser_title,r))}}),"default"==Notification.permission&&"Y"!=getCookie("notification_denied")&&i("#permission-description").fadeIn()}))}(this,jQuery);
