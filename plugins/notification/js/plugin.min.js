/*! Copyright (C) 2014 AJAXBOARD. All rights reserved. */!function(e,t){"use strict";function i(e,t){return t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(""),e.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(e,i){return t.indexOf("<"+i.toLowerCase()+">")>-1?e:""})}"undefined"!=typeof e.Notification&&(e.allowNotification=function(){Notification.requestPermission(function(){t("#permission-description").fadeOut()})},e.denyNotification=function(){var e=new Date;e.setTime(e.getTime()+2592e6),setCookie("notification_denied","Y",e),t("#permission-description").fadeOut()},t(function(){var n=e.ajaxboard;n.insertTrigger("events.broadcastMessage","before",function(e){var t={body:i(e.extra_vars.message),icon:NOTIFICATION_ICON,tag:NOTIFICATION_ID+":broadcastMessage:"+NOTIFICATION.length,onshow:function(e){setTimeout(function(){e.currentTarget.close()},NOTIFICATION_BRO_DURATION)}};NOTIFICATION.push(new Notification(NOTIFICATION_BRO_TITLE,t))}),NOTIFICATION_USER_INFO&&n.insertTrigger("events.insertDocument.detail","before",function(o,r){if(!(t.inArray(Number(o.module_srl),NOTIFICATION_USER_INFO)<0)){var s={body:i(r.title),icon:NOTIFICATION_ICON,tag:NOTIFICATION_ID+"insertDocument:"+o.target_srl,onclick:function(){e.focus(),location.href=n.request_uri.setQuery("document_srl",o.target_srl)},onshow:function(e){setTimeout(function(){e.currentTarget.close()},NOTIFICATION_DOC_DURATION)}};NOTIFICATION.push(new Notification(NOTIFICATION_DOC_TITLE+" #"+r.browser_title,s))}}),n.member_srl&&n.insertTrigger("events.insertComment.detail","before",function(t,o){if(n.member_srl!=t.target_member_srl&&n.member_srl==t.parent_member_srl){var r={body:i(o.content),icon:NOTIFICATION_ICON,tag:NOTIFICATION_ID+":insertComment:"+t.target_srl,onclick:function(){e.focus(),location.href=n.request_uri.setQuery("act","procAjaxboardRedirect").setQuery("type","C").setQuery("target_srl",t.target_srl)},onshow:function(e){setTimeout(function(){e.currentTarget.close()},NOTIFICATION_COM_DURATION)}};NOTIFICATION.push(new Notification(NOTIFICATION_COM_TITLE+" #"+o.browser_title,r))}}),"default"==Notification.permission&&"Y"!=getCookie("notification_denied")&&t("#permission-description").fadeIn()}))}(this,jQuery);
